import { useEffect, useState } from 'react'
import { Link } from "react-router-dom";
import { addEffect } from 'react-three-fiber'
import { a, useSpring } from 'react-spring/web'

import { useUIStore } from '../../../store'

import s from './RemixCTA.module.scss'

const RemixCTA = ({ align, ...props}) => {
  const [hover, setHover] = useState(false)

  const[sprops, set]= useSpring(() => ({ rotate : 0, x: 0, y: 0 }))
  const[magnetProps, setMagnet]= useSpring(() => ({ x: 0, y: 0, config: { tension: 100, friction: 14 } }))

  useEffect(() => {
    // use r3f animation frame
    return addEffect((s) => {
      set({ rotate: sprops.rotate.get() + (hover? 14 : 2) })
    })
  }, [set, sprops.rotate, hover])


  return (
    <div className={s.hoverTarget + ' ' + s[align]}
      onPointerMove={(e) => {
        const offsetX = e.currentTarget.offsetLeft
        const offsetY = e.currentTarget.offsetTop
        const delta = { x: e.clientX - offsetX, y: e.clientY - offsetY }
        setMagnet({ x: delta.x, y: delta.y })
      }}
      onMouseLeave={() => setMagnet({ x: 0, y: 0 })}  
    >
    <Link
      to="/remix"
      className={s.link}
      aria-label="Remix this blob"
      onClick={() => {
        useUIStore.setState({ isGallery: false });
      }}
      onPointerEnter={() => setHover(true)}
      onPointerLeave={() => setHover(false)}
      {...props}
    >
      <a.div className={s.magnet} style={magnetProps}>
      <a.svg className={s.ring} width="165" height="165" viewBox="0 0 165 165" fill="none" xmlns="http://www.w3.org/2000/svg"
       style={sprops}>
        <path d="M82.2209 10.6014L82.6594 0L86.6648 0.15942C88.5579 0.23913 89.8133 1.45471 89.7336 3.14855C89.6738 4.56341 88.7372 5.53986 87.3224 5.79891C88.5778 6.05797 89.0162 6.83514 89.2155 7.95109L89.7536 10.8804L88.9166 10.8406L88.4184 7.99094C88.1992 6.71558 87.6412 6.0779 86.047 6.01812L83.1575 5.89855L82.9583 10.6014H82.2209ZM83.1974 5.24094L86.326 5.38043C87.7608 5.44022 88.8568 4.66304 88.9166 3.20833C88.9764 1.79348 87.9401 0.916667 86.5054 0.856884L83.3767 0.717391L83.1974 5.24094Z" fill="white"/>
        <path d="M92.0254 11.2391L93.8587 0.797119L100.853 2.03263L100.734 2.71016L94.4765 1.59422L93.779 5.57973L98.5218 6.41668L98.4022 7.09422L93.6594 6.25726L92.8823 10.6812L99.1395 11.7772L99.02 12.4547L92.0254 11.2391Z" fill="white"/>
        <path d="M101.092 12.9131L104.56 2.88953L105.735 3.28808L106.293 11.7174C106.333 12.4946 106.373 13.0326 106.393 13.4312C106.632 13.1323 106.971 12.7537 107.529 12.116L113.168 5.8388L114.304 6.23735L110.837 16.2609L110.119 16.0218L112.571 8.96742L113.328 6.75547L106.254 14.6866L105.696 14.4874L105.018 3.8859L104.221 6.13771L101.81 13.1522L101.092 12.9131Z" fill="white"/>
        <path d="M113.627 17.7554L118.29 8.21014L118.968 8.54891L114.304 18.0942L113.627 17.7554Z" fill="white"/>
        <path d="M116.058 18.8315L122.136 16.1214L121.757 9.90399L122.554 10.3823L122.773 14.308C122.813 15.0254 122.833 15.404 122.873 15.8424C123.292 15.683 123.65 15.5036 124.268 15.2246L127.855 13.5906L128.612 14.0489L122.913 16.5797L123.331 23.2554L122.514 22.7573L122.275 18.4928L122.176 16.8587C121.737 17.0779 121.259 17.317 120.721 17.5562L116.815 19.3098L116.058 18.8315Z" fill="white"/>
        <path d="M130.326 23.4547C129.928 23.1359 129.888 22.5779 130.246 22.1594C130.585 21.7409 131.143 21.6612 131.562 22C131.98 22.3388 132 22.8569 131.661 23.2953C131.303 23.7138 130.764 23.8134 130.326 23.4547Z" fill="white"/>
        <path d="M133.136 31.4656L140.947 24.2917L143.657 27.241C144.933 28.6359 144.973 30.3696 143.717 31.5254C142.661 32.4819 141.326 32.5218 140.13 31.7047C140.828 32.7808 140.589 33.6377 139.951 34.5743L138.257 37.0254L137.699 36.4076L139.373 34.0363C140.11 32.9801 140.17 32.1232 139.094 30.9674L137.141 28.8352L133.674 32.0236L133.136 31.4656ZM137.639 28.3768L139.752 30.6884C140.728 31.7446 142.063 31.9638 143.119 30.9873C144.156 30.0308 144.036 28.6757 143.08 27.6196L140.967 25.308L137.639 28.3768Z" fill="white"/>
        <path d="M139.632 38.8587L148.321 32.7808L152.406 38.5997L151.828 38.9982L148.181 33.7971L144.873 36.1087L147.643 40.0544L147.065 40.4529L144.295 36.5073L140.629 39.0779L144.275 44.279L143.698 44.6776L139.632 38.8587Z" fill="white"/>
        <path d="M144.833 46.4311L154.379 41.788L154.917 42.904L149.357 49.2609C148.819 49.8387 148.48 50.2572 148.221 50.5362C148.6 50.4964 149.118 50.4764 149.955 50.4166L158.384 49.9583L158.902 51.0344L149.357 55.6775L149.018 55L155.734 51.7319L157.826 50.7156L147.225 51.3333L146.965 50.7953L154 42.8043L151.848 43.8605L145.172 47.1087L144.833 46.4311Z" fill="white"/>
        <path d="M150.313 58.7862L160.337 55.3387L160.576 56.0561L150.553 59.5036L150.313 58.7862Z" fill="white"/>
        <path d="M151.25 61.2174L157.467 63.6087L161.612 58.9456L161.832 59.8424L159.201 62.7717C158.723 63.2898 158.464 63.5887 158.165 63.9275C158.583 64.1069 158.942 64.2463 159.6 64.4855L163.286 65.8804L163.505 66.7572L157.687 64.5054L153.263 69.5072L153.043 68.5706L155.893 65.4021L156.989 64.1666C156.531 64.0072 156.013 63.8279 155.475 63.6087L151.469 62.0942L151.25 61.2174Z" fill="white"/>
        <path d="M158.085 74.5888C158.025 74.0707 158.404 73.6522 158.942 73.6124C159.48 73.5526 159.938 73.8913 159.978 74.4095C160.038 74.9276 159.679 75.3261 159.121 75.3859C158.583 75.4656 158.125 75.1468 158.085 74.5888Z" fill="white"/>
        <path d="M154.399 82.2808L165 82.7192L164.841 86.7247C164.761 88.6178 163.545 89.8732 161.852 89.7935C160.437 89.7337 159.46 88.7971 159.201 87.3823C158.942 88.6377 158.165 89.0761 157.049 89.2754L154.12 89.8134L154.159 88.9765L157.009 88.4783C158.284 88.2591 158.922 87.7011 158.982 86.1069L159.102 83.2174L154.399 83.0181V82.2808ZM159.759 83.2573L159.62 86.3859C159.56 87.8207 160.337 88.9167 161.792 88.9765C163.207 89.0363 164.083 88 164.143 86.5652L164.283 83.4366L159.759 83.2573Z" fill="white"/>
        <path d="M153.761 92.0851L164.183 93.9384L162.947 100.933L162.27 100.813L163.386 94.5761L159.42 93.8786L158.583 98.6214L157.906 98.5018L158.743 93.7591L154.339 92.9819L153.223 99.2192L152.545 99.0996L153.761 92.0851Z" fill="white"/>
        <path d="M152.067 101.132L162.091 104.6L161.692 105.775L153.263 106.333C152.486 106.373 151.948 106.413 151.549 106.433C151.848 106.672 152.226 107.011 152.864 107.569L159.141 113.208L158.743 114.344L148.719 110.877L148.958 110.159L156.013 112.611L158.225 113.368L150.294 106.293L150.493 105.736L161.114 105.058L158.842 104.281L151.828 101.85L152.067 101.132Z" fill="white"/>
        <path d="M147.225 113.687L156.73 118.35L156.391 119.027L146.886 114.364L147.225 113.687Z" fill="white"/>
        <path d="M146.129 116.098L148.839 122.176L155.076 121.817L154.598 122.614L150.672 122.833C149.955 122.853 149.576 122.893 149.118 122.913C149.277 123.332 149.456 123.69 149.735 124.328L151.369 127.935L150.911 128.692L148.38 122.993L141.705 123.411L142.203 122.594L146.467 122.375L148.101 122.275C147.882 121.837 147.663 121.339 147.404 120.801L145.65 116.895L146.129 116.098Z" fill="white"/>
        <path d="M141.505 130.386C141.824 129.987 142.382 129.947 142.801 130.306C143.219 130.645 143.299 131.203 142.96 131.621C142.621 132.04 142.103 132.06 141.665 131.721C141.246 131.362 141.167 130.824 141.505 130.386Z" fill="white"/>
        <path d="M133.495 133.196L140.669 141.007L137.719 143.717C136.324 144.993 134.591 145.033 133.435 143.777C132.478 142.721 132.438 141.386 133.255 140.19C132.179 140.888 131.323 140.649 130.386 140.011L127.935 138.297L128.553 137.739L130.924 139.413C131.98 140.15 132.837 140.21 133.993 139.134L136.125 137.181L132.937 133.714L133.495 133.196ZM136.583 137.679L134.272 139.792C133.216 140.768 132.996 142.103 133.973 143.159C134.929 144.196 136.284 144.076 137.341 143.12L139.652 141.007L136.583 137.679Z" fill="white"/>
        <path d="M126.101 139.652L132.159 148.341L126.341 152.406L125.942 151.828L131.143 148.201L128.832 144.893L124.886 147.643L124.487 147.065L128.433 144.315L125.862 140.649L120.661 144.275L120.263 143.698L126.101 139.652Z" fill="white"/>
        <path d="M118.469 144.893L123.112 154.438L121.996 154.976L115.64 149.417C115.062 148.879 114.643 148.54 114.364 148.281C114.404 148.659 114.424 149.178 114.484 150.015L114.942 158.444L113.866 158.962L109.223 149.417L109.9 149.078L113.169 155.794L114.185 157.886L113.567 147.284L114.105 147.025L122.096 154.06L121.04 151.908L117.792 145.232L118.469 144.893Z" fill="white"/>
        <path d="M106.214 150.313L109.661 160.337L108.944 160.576L105.496 150.552L106.214 150.313Z" fill="white"/>
        <path d="M103.723 151.27L101.331 157.487L105.994 161.632L105.098 161.851L102.168 159.221C101.65 158.743 101.351 158.484 101.013 158.185C100.833 158.603 100.694 158.962 100.455 159.62L99.0597 163.306L98.1829 163.525L100.435 157.707L95.4329 153.283L96.3695 153.063L99.5379 155.913L100.773 157.009C100.933 156.551 101.112 156.033 101.331 155.495L102.846 151.489L103.723 151.27Z" fill="white"/>
        <path d="M90.3515 158.085C90.8696 158.025 91.2881 158.404 91.3279 158.942C91.3877 159.48 91.0489 159.938 90.5308 159.978C90.0127 160.038 89.6141 159.679 89.5544 159.121C89.4746 158.583 89.7935 158.145 90.3515 158.085Z" fill="white"/>
        <path d="M82.7191 154.399L82.2807 165L78.2753 164.841C76.3822 164.761 75.1267 163.545 75.2065 161.851C75.2662 160.437 76.2028 159.46 77.6177 159.201C76.3623 158.942 75.9238 158.165 75.7246 157.049L75.1865 154.12L76.0235 154.159L76.5217 157.009C76.7409 158.284 77.2988 158.922 78.893 158.982L81.7825 159.101L81.9818 154.399H82.7191ZM81.7427 159.759L78.6141 159.62C77.1793 159.56 76.0833 160.337 76.0235 161.792C75.9637 163.206 76.9999 164.083 78.4347 164.143L81.5633 164.283L81.7427 159.759Z" fill="white"/>
        <path d="M72.8552 153.741L71.0019 164.163L64.0073 162.927L64.1269 162.25L70.3642 163.366L71.0617 159.4L66.3189 158.563L66.4385 157.886L71.1812 158.723L71.9584 154.319L65.761 153.203L65.8805 152.525L72.8552 153.741Z" fill="white"/>
        <path d="M63.8079 152.067L60.3405 162.091L59.1648 161.692L58.6068 153.263C58.567 152.486 58.5271 151.948 58.5072 151.549C58.268 151.848 57.9293 152.226 57.3713 152.864L51.7318 159.141L50.5959 158.743L54.0633 148.719L54.7807 148.958L52.3296 156.013L51.5724 158.225L58.6467 150.294L59.2046 150.493L59.8822 161.114L60.6594 158.842L63.0905 151.828L63.8079 152.067Z" fill="white"/>
        <path d="M51.2734 147.205L46.6104 156.71L45.9329 156.371L50.5959 146.866L51.2734 147.205Z" fill="white"/>
        <path d="M48.8423 146.109L42.7644 148.799L43.1231 155.016L42.326 154.538L42.1068 150.612C42.0869 149.895 42.047 149.516 42.0271 149.078C41.6086 149.237 41.2499 149.417 40.6322 149.696L37.0452 151.31L36.2681 150.851L41.9673 148.341L41.5688 141.685L42.3858 142.183L42.605 146.447L42.7047 148.081C43.1431 147.862 43.6413 147.643 44.1594 147.404L48.0652 145.65L48.8423 146.109Z" fill="white"/>
        <path d="M34.5742 141.466C34.9728 141.784 35.0126 142.342 34.6539 142.761C34.3152 143.179 33.7572 143.259 33.3387 142.92C32.9203 142.582 32.9003 142.063 33.2391 141.625C33.5978 141.207 34.1358 141.127 34.5742 141.466Z" fill="white"/>
        <path d="M31.7844 133.455L23.9728 140.609L21.2826 137.659C20.0072 136.265 19.9674 134.531 21.2427 133.375C22.2989 132.418 23.634 132.399 24.8098 133.196C24.1123 132.12 24.3514 131.263 25.009 130.326L26.7029 127.875L27.2609 128.493L25.5869 130.864C24.8496 131.92 24.7898 132.777 25.8659 133.933L27.8188 136.065L31.2862 132.897L31.7844 133.455ZM27.3007 136.543L25.1884 134.232C24.2119 133.176 22.8967 132.957 21.8206 133.933C20.7844 134.889 20.904 136.245 21.8605 137.281L23.9728 139.592L27.3007 136.543Z" fill="white"/>
        <path d="M25.3081 126.062L16.6197 132.12L12.5544 126.321L13.1323 125.922L16.7592 131.123L20.0671 128.812L17.3171 124.866L17.895 124.467L20.645 128.413L24.3117 125.842L20.6849 120.641L21.2628 120.243L25.3081 126.062Z" fill="white"/>
        <path d="M20.1068 118.469L10.5615 123.112L10.0234 121.996L15.5832 115.639C16.1213 115.062 16.46 114.643 16.7191 114.364C16.3405 114.404 15.8224 114.424 14.9854 114.484L6.57598 114.922L6.05786 113.846L15.6032 109.203L15.9419 109.88L9.22634 113.149L7.13395 114.165L17.7354 113.547L17.9945 114.085L10.96 122.076L13.1122 121.02L19.7879 117.772L20.1068 118.469Z" fill="white"/>
        <path d="M14.6667 106.154L4.64318 109.582L4.40405 108.864L14.4276 105.437L14.6667 106.154Z" fill="white"/>
        <path d="M13.71 103.663L7.49263 101.272L3.34771 105.935L3.1285 105.038L5.75894 102.109C6.2372 101.591 6.49626 101.292 6.79517 100.953C6.37669 100.774 6.018 100.634 5.36039 100.395L1.67379 99L1.45459 98.1232L7.27343 100.375L11.6973 95.3732L11.9165 96.3098L9.06691 99.4782L7.97089 100.714C8.42923 100.873 8.94734 101.053 9.48539 101.272L13.4908 102.786L13.71 103.663Z" fill="white"/>
        <path d="M6.89496 90.2916C6.95475 90.8098 6.57612 91.2282 6.03808 91.2681C5.50004 91.3279 5.0417 90.9891 5.00185 90.4511C4.94207 89.913 5.30076 89.5344 5.85873 89.4746C6.39678 89.3949 6.85511 89.7138 6.89496 90.2916Z" fill="white"/>
        <path d="M10.6014 82.6594L0 82.2011L0.179348 78.1956C0.259058 76.3025 1.47464 75.0471 3.18841 75.1268C4.60326 75.1866 5.57971 76.1232 5.83877 77.538C6.09783 76.2826 6.875 75.8641 7.99094 75.6449L10.9203 75.1069L10.8804 75.9438L8.01087 76.442C6.73551 76.6612 6.09783 77.2192 6.01812 78.8134L5.91848 81.7029L10.6214 81.9022L10.6014 82.6594ZM5.24094 81.663L5.38043 78.5344C5.44022 77.0996 4.66304 76.0036 3.22826 75.9438C1.81341 75.8841 0.936594 76.9203 0.876812 78.3351L0.737319 81.4638L5.24094 81.663Z" fill="white"/>
        <path d="M11.259 72.8152L0.836914 70.942L2.09235 63.9474L2.76988 64.067L1.65394 70.3043L5.61952 71.0217L6.47641 66.279L7.15394 66.3985L6.29706 71.1413L10.701 71.9384L11.817 65.7011L12.4945 65.8206L11.259 72.8152Z" fill="white"/>
        <path d="M12.9528 63.7481L2.94922 60.2608L3.3677 59.0851L11.797 58.5471C12.5742 58.5072 13.1123 58.4873 13.5108 58.4474C13.2119 58.2083 12.8333 57.8496 12.2155 57.3116L5.95828 51.6721L6.35683 50.5362L16.3604 54.0235L16.1213 54.7409L9.06697 52.2898L6.87494 51.5126L14.7662 58.6068L14.567 59.1648L3.9456 59.8025L6.19741 60.5996L13.192 63.0507L12.9528 63.7481Z" fill="white"/>
        <path d="M17.835 51.2138L8.32959 46.5308L8.66836 45.8533L18.1738 50.5362L17.835 51.2138Z" fill="white"/>
        <path d="M18.9113 48.8025L16.2211 42.7246L10.0037 43.0833L10.4819 42.2862L14.4076 42.067C15.1051 42.0471 15.5037 42.0272 15.9421 41.9873C15.7826 41.5688 15.6033 41.2101 15.3243 40.5924L13.7102 37.0054L14.1685 36.2482L16.6794 41.9474L23.3352 41.5489L22.837 42.3659L18.5725 42.5851L16.9384 42.6848C17.1576 43.1232 17.3769 43.6214 17.616 44.1395L19.3696 48.0453L18.9113 48.8025Z" fill="white"/>
        <path d="M23.5544 34.5344C23.2356 34.933 22.6776 34.9728 22.2591 34.6141C21.8407 34.2754 21.761 33.7174 22.0997 33.2989C22.4385 32.8804 22.9566 32.8605 23.395 33.2192C23.8334 33.558 23.9131 34.096 23.5544 34.5344Z" fill="white"/>
        <path d="M31.5851 31.7446L24.4312 23.9131L27.3804 21.2228C28.7754 19.9475 30.5091 19.9275 31.6648 21.183C32.6214 22.2391 32.6413 23.5942 31.8243 24.7699C32.9004 24.0725 33.7572 24.3116 34.6938 24.9692L37.1449 26.6631L36.5272 27.221L34.1558 25.5471C33.0996 24.8098 32.2427 24.75 31.067 25.8062L28.9348 27.7591L32.1033 31.2464L31.5851 31.7446ZM28.4964 27.241L30.808 25.1286C31.8641 24.1522 32.0833 22.837 31.1268 21.7609C30.1703 20.7246 28.8152 20.8243 27.7591 21.8007L25.4475 23.9131L28.4964 27.241Z" fill="white"/>
        <path d="M38.9784 25.2681L32.9204 16.5598L38.7592 12.4946L39.1577 13.0725L33.9367 16.6993L36.2483 20.0072L40.194 17.2572L40.5925 17.8351L36.6469 20.5851L39.2175 24.2717L44.4385 20.6449L44.8371 21.2228L38.9784 25.2681Z" fill="white"/>
        <path d="M46.5707 20.067L41.9475 10.5218L43.0635 9.98371L49.4203 15.5435C49.9982 16.0815 50.3968 16.4203 50.6957 16.6993C50.6558 16.3207 50.6359 15.8025 50.5761 14.9656L50.1377 6.5761L51.2138 6.05798L55.837 15.6033L55.1595 15.942L51.9113 9.22646L50.895 7.13407L51.4928 17.7355L50.9548 17.9946L42.9837 10.9602L44.02 13.1123L47.2482 19.7881L46.5707 20.067Z" fill="white"/>
        <path d="M58.8858 14.6468L55.4583 4.62322L56.1756 4.38409L59.6032 14.4076L58.8858 14.6468Z" fill="white"/>
        <path d="M61.3768 13.6902L63.7681 7.49272L59.125 3.32787L60.0217 3.10867L62.9511 5.7391C63.4692 6.23729 63.7681 6.47642 64.1069 6.77533C64.2862 6.35685 64.4257 5.99816 64.6649 5.34055L66.0598 1.65396L66.9366 1.43475L64.6848 7.25359L69.6866 11.6775L68.75 11.9166L65.5815 9.04707L64.346 7.97099C64.1866 8.42932 64.0072 8.94743 63.788 9.48548L62.2536 13.4909L61.3768 13.6902Z" fill="white"/>
        <path d="M74.7682 6.8949C74.2501 6.95469 73.8316 6.57606 73.7917 6.03802C73.7319 5.49998 74.0707 5.04164 74.6088 5.00179C75.1468 4.94201 75.5254 5.3007 75.5852 5.85867C75.645 6.39672 75.3261 6.83512 74.7682 6.8949Z" fill="white"/>
      </a.svg>
      <svg className={s.arrow} width="61" height="42" viewBox="0 0 61 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M36.2506 0.250983C38.2264 0.250983 39.807 0.250983 41.2888 0.250984C44.3512 9.9322 50.0809 16.6498 60.3549 19.1195C60.3549 20.2061 60.3549 21.3916 60.3549 22.6758C50.3773 24.948 44.45 31.5667 41.2888 41.248C39.807 41.248 38.3252 41.248 36.2506 41.248C37.8312 33.4437 42.1779 27.8128 48.4015 22.9722C32.4967 22.9722 16.493 22.9722 0.390621 22.9722C0.390621 21.4904 0.390621 20.4037 0.390622 18.8231C16.493 18.8231 32.4967 18.8231 48.5003 18.8231C48.5991 18.6255 48.5991 18.428 48.6979 18.2304C42.3755 13.8837 37.93 8.2528 36.2506 0.250983Z" fill="white"/>
      </svg>
      </a.div>
    </Link>
    </div>
  )
}

export default RemixCTA